# Vue 3 + TS + Vite + TailwindCSS 可复用组件标准示例

下面是一个符合现代 Vue 3 开发标准的可复用组件完整示例，包含 `<script setup lang="ts">` 和 `<style scoped lang="scss">`，以及详细的中文注释说明。

## 标准组件模板：`BaseButton.vue`

```vue
<template>
  <button
    :class="[
      'base-button',
      `base-button--${variant}`,
      `base-button--${size}`,
      {
        'base-button--disabled': disabled,
        'base-button--full-width': fullWidth
      }
    ]"
    :disabled="disabled"
    :type="nativeType"
    @click="handleClick"
  >
    <!-- 前置图标 -->
    <span v-if="$slots.icon || icon" class="base-button__icon">
      <slot name="icon">
        <component :is="icon" v-if="icon" />
      </slot>
    </span>
    
    <!-- 按钮文本 -->
    <span class="base-button__content">
      <slot></slot>
    </span>
    
    <!-- 后置图标 -->
    <span v-if="$slots.trailingIcon || trailingIcon" class="base-button__icon">
      <slot name="trailingIcon">
        <component :is="trailingIcon" v-if="trailingIcon" />
      </slot>
    </span>
  </button>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import type { PropType, Component } from 'vue'

// 定义按钮变体类型
type ButtonVariant = 'primary' | 'secondary' | 'outline' | 'text' | 'danger'

// 定义按钮尺寸类型
type ButtonSize = 'sm' | 'md' | 'lg'

// 定义props
const props = defineProps({
  // 按钮类型变体
  variant: {
    type: String as PropType<ButtonVariant>,
    default: 'primary',
    validator: (value: string) => {
      return ['primary', 'secondary', 'outline', 'text', 'danger'].includes(value)
    }
  },
  
  // 按钮尺寸
  size: {
    type: String as PropType<ButtonSize>,
    default: 'md',
    validator: (value: string) => {
      return ['sm', 'md', 'lg'].includes(value)
    }
  },
  
  // 是否禁用
  disabled: {
    type: Boolean,
    default: false
  },
  
  // 原生button类型
  nativeType: {
    type: String as PropType<'button' | 'submit' | 'reset'>,
    default: 'button',
    validator: (value: string) => {
      return ['button', 'submit', 'reset'].includes(value)
    }
  },
  
  // 是否宽度100%
  fullWidth: {
    type: Boolean,
    default: false
  },
  
  // 前置图标组件
  icon: {
    type: Object as PropType<Component>,
    default: null
  },
  
  // 后置图标组件
  trailingIcon: {
    type: Object as PropType<Component>,
    default: null
  },
  
  // 加载状态
  loading: {
    type: Boolean,
    default: false
  }
})

// 定义emits
const emit = defineEmits<{
  (e: 'click', event: MouseEvent): void
}>()

// 计算类名
const buttonClasses = computed(() => [
  'base-button',
  `base-button--${props.variant}`,
  `base-button--${props.size}`,
  {
    'base-button--disabled': props.disabled,
    'base-button--full-width': props.fullWidth,
    'base-button--loading': props.loading
  }
])

// 点击事件处理
const handleClick = (event: MouseEvent) => {
  if (!props.disabled && !props.loading) {
    emit('click', event)
  } else {
    event.preventDefault()
  }
}

// 暴露组件方法
defineExpose({
  focus: () => {
    // 可以通过ref调用的方法
    // 例如：在父组件中通过ref调用buttonRef.value.focus()
  }
})
</script>

<style scoped lang="scss">
// 基础按钮样式
.base-button {
  @apply inline-flex items-center justify-center rounded-md font-medium transition-colors;
  @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500;
  @apply disabled:opacity-50 disabled:cursor-not-allowed;
  
  // 垂直居中内容
  &__icon {
    @apply flex items-center justify-center;
  }
  
  &__content {
    @apply flex-1;
  }
  
  // 变体样式
  &--primary {
    @apply bg-blue-600 text-white hover:bg-blue-700;
    @apply dark:bg-blue-500 dark:hover:bg-blue-600;
  }
  
  &--secondary {
    @apply bg-gray-100 text-gray-800 hover:bg-gray-200;
    @apply dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-gray-600;
  }
  
  &--outline {
    @apply bg-transparent border border-gray-300 text-gray-700 hover:bg-gray-50;
    @apply dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700;
  }
  
  &--text {
    @apply bg-transparent text-gray-700 hover:bg-gray-100;
    @apply dark:text-gray-200 dark:hover:bg-gray-700;
  }
  
  &--danger {
    @apply bg-red-600 text-white hover:bg-red-700;
    @apply dark:bg-red-500 dark:hover:bg-red-600;
  }
  
  // 尺寸样式
  &--sm {
    @apply px-3 py-1.5 text-sm gap-1.5;
  }
  
  &--md {
    @apply px-4 py-2 text-base gap-2;
  }
  
  &--lg {
    @apply px-6 py-3 text-lg gap-3;
  }
  
  // 全宽样式
  &--full-width {
    @apply w-full;
  }
  
  // 加载状态
  &--loading {
    @apply relative cursor-wait;
    
    &::after {
      content: '';
      @apply absolute inset-0 bg-white/30;
    }
  }
}

// 动画效果
.base-button {
  transition: all 0.2s ease-in-out;
  
  &:active:not(:disabled) {
    transform: scale(0.98);
  }
}
</style>
```

## 组件使用示例

### 在父组件中使用

```vue
<template>
  <div class="p-8 space-y-4">
    <h1 class="text-2xl font-bold">按钮组件示例</h1>
    
    <!-- 基本使用 -->
    <BaseButton @click="handleClick">主要按钮</BaseButton>
    
    <!-- 使用变体 -->
    <BaseButton variant="secondary">次要按钮</BaseButton>
    <BaseButton variant="outline">轮廓按钮</BaseButton>
    <BaseButton variant="text">文本按钮</BaseButton>
    <BaseButton variant="danger">危险按钮</BaseButton>
    
    <!-- 使用尺寸 -->
    <BaseButton size="sm">小按钮</BaseButton>
    <BaseButton size="md">中按钮</BaseButton>
    <BaseButton size="lg">大按钮</BaseButton>
    
    <!-- 使用图标 -->
    <BaseButton>
      <template #icon>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd" />
        </svg>
      </template>
      带图标按钮
    </BaseButton>
    
    <!-- 禁用状态 -->
    <BaseButton disabled>禁用按钮</BaseButton>
    
    <!-- 加载状态 -->
    <BaseButton :loading="true">加载中...</BaseButton>
    
    <!-- 全宽按钮 -->
    <BaseButton full-width>全宽按钮</BaseButton>
  </div>
</template>

<script setup lang="ts">
import BaseButton from '@/components/BaseButton.vue'

const handleClick = (event: MouseEvent) => {
  console.log('按钮被点击', event)
}
</script>
```

## 标准组件结构解析

### 1. 模板部分 (`<template>`)

```vue
<template>
  <button
    :class="[...动态类名]"
    :disabled="disabled"
    :type="nativeType"
    @click="handleClick"
  >
    <!-- 插槽设计 -->
    <slot name="icon"></slot>
    <slot></slot>
    <slot name="trailingIcon"></slot>
  </button>
</template>
```

- 使用动态类名绑定实现多样式变体
- 合理设计插槽结构，支持图标和文本的自由组合
- 原生HTML属性透传（如disabled、type等）

### 2. 脚本部分 (`<script setup lang="ts">`)

```typescript
// 类型定义
type ButtonVariant = 'primary' | 'secondary' | 'outline' | 'text' | 'danger'

// Props定义
const props = defineProps({
  variant: {
    type: String as PropType<ButtonVariant>,
    default: 'primary',
    validator: (value: string) => [...]
  }
  // 其他props...
})

// Emits定义
const emit = defineEmits<{
  (e: 'click', event: MouseEvent): void
}>()

// 计算属性
const buttonClasses = computed(() => [...])

// 方法
const handleClick = (event: MouseEvent) => {...}

// 暴露API
defineExpose({
  focus: () => {...}
})
```

- 使用TypeScript严格定义props和emits类型
- 对props进行验证确保传入值合法
- 使用组合式API组织逻辑
- 暴露必要的组件方法

### 3. 样式部分 (`<style scoped lang="scss">`)

```scss
.base-button {
  // 基础样式
  @apply ...;
  
  // 变体样式
  &--primary {
    @apply ...;
  }
  
  // 伪类和状态
  &:hover {
    @apply ...;
  }
  
  // 子元素样式
  &__icon {
    @apply ...;
  }
}

// 动画效果
.base-button {
  transition: ...;
}
```

- 使用Tailwind的`@apply`指令组织样式
- 采用BEM命名规范
- 添加合理的过渡动画
- 使用scoped确保样式隔离

## 标准组件最佳实践

1. **命名规范**：
    - 组件文件使用PascalCase命名（如`BaseButton.vue`）
    - CSS类名使用BEM规范（如`.base-button__icon`）
    - 事件命名使用kebab-case（如`@update:model-value`）

2. **类型安全**：
    - 为所有props和emits定义TypeScript类型
    - 对props进行运行时验证
    - 使用`PropType`导入复杂类型

3. **可复用性设计**：
    - 通过props暴露可配置选项
    - 使用插槽提供内容灵活性
    - 提供足够的变体和尺寸选项

4. **可访问性**：
    - 支持键盘操作
    - 添加适当的ARIA属性
    - 确保焦点状态可见

5. **性能优化**：
    - 合理使用计算属性
    - 避免不必要的重新渲染
    - 使用CSS过渡代替JavaScript动画

6. **文档化**：
    - 在组件头部添加注释说明用途
    - 为每个props添加注释说明
    - 提供使用示例

这个标准组件模板可以作为Vue 3 + TS + Vite + TailwindCSS项目中的基础组件开发规范，根据实际需求可以在此基础上进行扩展和调整。